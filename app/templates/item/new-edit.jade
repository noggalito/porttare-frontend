ion-modal-view.item-form
  ion-header-bar.bar-stable.bar.bar-header
    .title.alt-logo
    
    .ion-nav-buttons.buttons(side="primary")
      button.button.button-clear(
        ng-click="itemsVm.closeModal()"
      ) {{::('globals.cancel'|translate)}}
    

  form(
    name='itemsVm.itemForm'
    ng-submit='itemsVm.submitProcess(itemsVm.item.id)'
    novalidate
  )
    ion-content.resource-form
      .list.list-inset
        legend {{::("item.formLegend"|translate)}}

        label.item.item-input.item-stacked-label(
          ng-class="{'item-error': itemsVm.itemForm.titulo.$touched && itemsVm.itemForm.titulo.$invalid}"
        )
          span.input-label {{::("item.titulo"|translate)}}
          input(
            name='titulo'
            type='text'
            ng-model='itemsVm.item.titulo'
            ng-class='input-error'
            required
          )
        .errors-wrapper    
          .show-errors(ng-messages="itemsVm.itemForm.titulo.$error" ng-if="itemsVm.itemForm.titulo.$touched")
            span(ng-message="required" class="message-error") {{::("globals.isRequired"|translate)}}
          show-error(array-messages='itemsVm.messages.titulo')

        label.item.item-input.item-stacked-label
          span.input-label {{::("item.descripcion"|translate)}}
          input(
            type='text'
            ng-model='itemsVm.item.descripcion'
          )
        show-error(array-messages='itemsVm.messages.descripcion')

        label.item.item-input.item-stacked-label
          span.input-label {{::("item.observaciones"|translate)}}
          input(
            type='text'
            ng-model='itemsVm.item.observaciones'
          )
        show-error(array-messages='itemsVm.messages.observaciones')

        label.item.item-input.item-select(
          ng-class="{'item-error': itemsVm.itemForm.unidad_medida.$touched && itemsVm.itemForm.unidad_medida.$invalid}"
        )
          span.input-label {{::("item.unidadMedida"|translate)}}
          select(ng-model='itemsVm.item.unidad_medida' name='unidad_medida' required)
            option(selected='' value='volumen') Volumen
            option(value='unidades') Unidades
            option(value='longitud') Longitud
        .errors-wrapper    
          span.show-errors(ng-messages="itemsVm.itemForm.unidad_medida.$error" ng-if="itemsVm.itemForm.unidad_medida.$touched")
            span(ng-message="required" class="message-error") {{::("globals.isRequired"|translate)}}
          show-error(array-messages='itemsVm.messages.unidad_medida')

        label.item.item-input.item-stacked-label
          span.input-label {{::("item.volumen"|translate)}}
          input(
            type='text'
            ng-model='itemsVm.item.volumen'
          )
        show-error(array-messages='itemsVm.messages.volumen')

        label.item.item-input.item-stacked-label(
          ng-class="{'item-error': itemsVm.itemForm.precio.$touched && itemsVm.itemForm.precio.$invalid}"
        )
          span.input-label {{::("item.precio"|translate)}}
          input(
            min='0'
            name='precio'
            step='any'
            type='number'
            ng-model='itemsVm.item.precio'
            required
          )
        .errors-wrapper
          span.show-errors(ng-messages="itemsVm.itemForm.precio.$error" ng-if="itemsVm.itemForm.precio.$touched")
            span(ng-message="required" class="message-error") {{::("globals.isRequired"|translate)}}
          show-error(array-messages='itemsVm.messages.precio')

        label.item.item-input.item-stacked-label
          span.input-label {{::("item.peso"|translate)}}
          input(
            type='text'
            ng-model='itemsVm.item.peso'
          )
        show-error(array-messages='itemsVm.messages.peso')

        label.item.item-input.item-input--no-borders.item-stacked-label
          span.input-label {{::("item.imagen"|translate)}}
        .uploader(
          ng-if="itemsVm.images.length === 0"
          ngf-select="itemsVm.concatImages($files)"
          accept="image/*"
          multiple
        )
          .img-placeholder
          .img-placeholder--legend {{::("item.addImages"|translate)}}

        .row.images-previews
          .img-wrapper.col-33(
            ng-repeat="image in itemsVm.imagesUrls"
          )
            img(ngf-src="image")
          
          .img-wrapper.col-33(ng-if="itemsVm.images.length > 0")
            .add-image-placeholder(
              ngf-select="itemsVm.concatImages($files)"
              accept="image/*"
              multiple
            )
              i.ion-plus
        show-error(array-messages='itemsVm.messages.imagen')

    .bar.bar-footer.bar-stable
      button.button.button-small.button-outline.button-energized(
        type="submit"
        ng-disabled="itemsVm.itemForm.$invalid"
      ) {{::("item.publishItem"|translate)}}
